import Authentication from"/assets/lib/mardens-auth-lib.js";function displayAdminLogin(){openPopup("admin-login-popup");setTimeout(()=>{$("#admin-login-popup.popup input#username").focus()},250)}function displayAdminActions(){openPopup("admin-actions-popup")}const auth=new Authentication;const adminLoginElement=$("#admin-login");auth.loginWithTokenFromCookie().then(data=>{if(data.success){adminLoginElement.html("Admin Actions")}else{adminLoginElement.html("Administrator Login")}});adminLoginElement.on("click",()=>{if(auth.isLoggedIn){displayAdminActions()}else{displayAdminLogin()}});$(auth).on("login",()=>{$("#admin-login").html("Admin Actions");closePopup();$("body").append(`
        <script class="admin-script" src="/assets/js/admin-actions.min.js"></script>
        <script class="admin-script" src="/assets/js/database-list.min.js"></script>
        <script class="admin-script" src="/assets/js/pricing-list.min.js"></script>
    `)});$(auth).on("logout",()=>{window.reload()});$("#admin-login-popup.popup form").on("submit",async e=>{const target=$(e.target);target.find("#login-error").html("");const formData=new FormData(target[0]);const username=formData.get("username");const password=formData.get("password");try{await auth.login(username,password)}catch(e){if(e.responseJSON!==undefined&&e.responseJSON.message!==undefined){target.find("#login-error").html(e.responseJSON.message)}else{target.find("#login-error").html("An unknown error occurred.")}}});