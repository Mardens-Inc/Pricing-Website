/* Author: Drew Chase */
$(".only-on-list-view").hide();const database=new Database;$(database).on("loaded",async(a,t)=>{let e,s=$('<button id="clear-search" title="Clear search">x</button>');if(t.type==listTypes.directory){$(".only-on-list-view").hide(),e=await database.generateTable(),s.on("click",()=>{$("#search").val(""),database.search("")}),$("#page-header").html("<h1>Pricing Database Directory</h1>");let a=new Pagination(database);$(".pagination").replaceWith(a.getPaginationHTML()),document.title="Pricing Database"}else t.type==listTypes.location&&($(".only-on-list-view").show(),(e=await database.generateTable()).find(".location-id").remove(),e.addClass("list-view"),database.options["voice-search"]&&"webkitSpeechRecognition"in window?(s.html('<i class="fas fa-microphone"></i>'),s.on("click",()=>{database.openVoicePopup()})):s.on("click",()=>{$("#search").val(""),database.search("")}),$("#page-header").html(` \n        <h1> <img src="/assets/images/locations/${database.listData.image}" width="70px" style="object-fit: contain;"><span style="font-size:3.4375rem">${database.listData.name}</span></h1>\n        <h2 style="font-weight: 500">Location: <b>${database.listData.location}</b></h2>\n        <p>PO#: <b>${database.listData.po}</b><br>Date Posted: <b>${new Date(database.listData.post_date).toLocaleString()}</b></p>`),document.title=`${database.listData.name}#${database.listData.po} - Pricing Database`);e.addClass("search-table"),$("button#clear-search").replaceWith(s),e.find("th").on("click",a=>database.sortList($(a.target).attr("sort"),!database.ascending)),$(".search-table").replaceWith(e)}),$("#search").on("input",a=>{database.search(a.target.value)}),$("#directory-button").on("click",()=>{database.loadList("")}),$("#entries").on("change",a=>{database.limit=a.target.value,database.load(database.limit,database.page,database.sort,database.ascending,database.keyword,database.list)});