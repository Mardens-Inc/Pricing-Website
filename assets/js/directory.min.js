/* Author: Drew Chase */
$(".only-on-list-view").hide();const database=new Database;$(database).on("loaded",async(a,e)=>{let t,i=$('<button id="clear-search" title="Clear search">x</button>');if(e.type==listTypes.directory){$(".only-on-list-view").hide(),t=await database.generateTable(),i.on("click",()=>{$("#search").val(""),database.search("")}),$("#page-header").html("Pricing Database Directory");let a=new Pagination(database);$(".pagination").replaceWith(a.getPaginationHTML())}else e.type==listTypes.location&&($(".only-on-list-view").show(),(t=await database.generateTable()).find(".location-id").remove(),t.addClass("list-view"),database.options["voice-search"]&&"webkitSpeechRecognition"in window?(i.html('<i class="fas fa-microphone"></i>'),i.on("click",()=>{database.openVoicePopup()})):i.on("click",()=>{$("#search").val(""),database.search("")}),"webkitSpeechRecognition"in window||console.error("Voice search is not supported in this browser."),$("#page-header").html(`${database.listData.name}#${database.listData.po}`));t.addClass("search-table"),$("button#clear-search").replaceWith(i),t.find("th").on("click",a=>database.sortList($(a.target).attr("sort"),!database.ascending)),$(".search-table").replaceWith(t)}),$("#search").on("input",a=>{database.search(a.target.value)}),$("#directory-button").on("click",()=>{database.loadList("")}),$("#entries").on("change",a=>{database.limit=a.target.value,database.load(database.limit,database.page,database.sort,database.ascending,database.keyword,database.list)});