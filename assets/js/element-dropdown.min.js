const dropdown=$(`<div class="dropdown-items" tabindex="-1"> </div>`);if($(".dropdown-items").length===0){$("body").append(dropdown)}function openDropdown(element,items){element=$(element);dropdown.html("");Object.keys(items).forEach(item=>{const itemElement=$(`<div class="dropdown-item">${item}</div>`);itemElement.on("click",()=>{items[item]();dropdown.css({opacity:0,"pointer-events":"none"})});dropdown.append(itemElement)});dropdown[0].scrollTo({top:0,behavior:"auto"});let x=element.offset().left+element.width()/2-dropdown.width()/2;const scrollYOffset=window.scrollY||window.pageYOffset;let y=element.offset().top+element.height()+40+scrollYOffset;if(y+dropdown.height()>window.innerHeight){y=window.innerHeight-dropdown.height()-10}if(x+dropdown.width()>window.innerWidth){x=window.innerWidth-dropdown.width()-10}dropdown.css({top:y,left:x,opacity:1,"pointer-events":"all"});dropdown.focus()}function closeDropdown(){dropdown.css({opacity:0,"pointer-events":"none"})}dropdown.on("blur",()=>{closeDropdown()});$("*").on("scroll",e=>{if(e.currentTarget!==dropdown[0]){closeDropdown()}});