$(document).on("load",()=>{$(`[toggle-hidden]`).each((_,element)=>{let target=$(element);let toggle=$(`#${target.attr("toggle-hidden")}`);if(toggle.attr("value")==="true"){target.show()}else{target.hide()}});if($("toggle").data("events")===undefined){$("toggle").on("click",e=>{e.preventDefault();let target=$(e.target);let value=target.attr("value")==="true";target.attr("value",!value);target.trigger("toggle",[{value:!value}]);$(`[toggle-hidden="${target.attr("id")}"]`).toggle()})}const dragDropArea=$(".drag-drop-area");dragDropArea.on("dragover",e=>{let target=$(e.target);e.preventDefault();e.stopPropagation();target.addClass("dragover")});dragDropArea.on("dragleave",e=>{let target=$(e.target);e.preventDefault();e.stopPropagation();target.removeClass("dragover")});dragDropArea.on("drop",e=>{let target=$(e.target);e.preventDefault();e.stopPropagation();target.removeClass("dragover");let file=e.originalEvent.dataTransfer.files[0];handleUploadedFile(file,target)});dragDropArea.on("click",e=>{let target=$(e.currentTarget);let input=$(`<input type="file" accept="${target.attr("accept").replace(/\*/g,"")}">`);input.trigger("click");input.on("change",()=>{let file=input.prop("files")[0];handleUploadedFile(file,target)})});dragDropArea.each((_,element)=>{let target=$(element);let acceptAttr=target.attr("accept");target.html(`<i>(${acceptAttr})</i>`)});function handleUploadedFile(file,target){let reader=new FileReader;reader.readAsDataURL(file);reader.onload=()=>{target.removeClass("dragover");let content=atob(reader.result.split(";base64,").pop());target.trigger("upload",[{name:file.name,content:content,file:file}])}}});