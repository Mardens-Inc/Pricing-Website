/* Author: Drew Chase */
function handleUploadedFile(e,a){let t=new FileReader;t.readAsDataURL(e),t.onload=(()=>{a.removeClass("dragover");let o=atob(t.result.split(";base64,").pop());a.trigger("upload",[{name:e.name,content:o,file:e}])})}function closePopup(){let e=$(".popup.active");e.removeClass("active"),$("body").css("overflow",""),$(e).trigger("close")}function openPopup(e){$(`#${e}`).addClass("active"),$("body").css("overflow","hidden")}$("form").on("submit",e=>{e.preventDefault()}),$(".drag-drop-area").on("dragover",e=>{let a=$(e.target);e.preventDefault(),e.stopPropagation(),a.addClass("dragover")}),$(".drag-drop-area").on("dragleave",e=>{let a=$(e.target);e.preventDefault(),e.stopPropagation(),a.removeClass("dragover")}),$(".drag-drop-area").on("drop",e=>{let a=$(e.target);e.preventDefault(),e.stopPropagation(),a.removeClass("dragover"),handleUploadedFile(e.originalEvent.dataTransfer.files[0],a)}),$(".drag-drop-area").on("click",e=>{let a=$(e.currentTarget),t=$(`<input type="file" accept="${a.attr("accept").replace(/\*/g,"")}">`);t.trigger("click"),t.on("change",()=>{handleUploadedFile(t.prop("files")[0],a)})}),$(".drag-drop-area").each((e,a)=>{let t=$(a),o=t.attr("accept");t.html(`<i>(${o})</i>`)}),$(".popup:not(.no-close)").on("click",e=>{e.target==$(".popup.active")[0]&&closePopup()}),$(".popup .close").on("click",()=>closePopup()),$("toggle").on("click",e=>{e.preventDefault();let a=$(e.target),t="true"===a.attr("value");a.attr("value",!t),a.trigger("toggle",[{value:!t}])});