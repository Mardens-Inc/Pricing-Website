$(".drag-drop-area").on("dragover",e=>{let target=$(e.target);e.preventDefault();e.stopPropagation();target.addClass("dragover")});$(".drag-drop-area").on("dragleave",e=>{let target=$(e.target);e.preventDefault();e.stopPropagation();target.removeClass("dragover")});$(".drag-drop-area").on("drop",e=>{let target=$(e.target);e.preventDefault();e.stopPropagation();target.removeClass("dragover");let file=e.originalEvent.dataTransfer.files[0];handleUploadedFile(file,target)});$(".drag-drop-area").on("click",e=>{let target=$(e.currentTarget);let input=$(`<input type="file" accept="${target.attr("accept").replace(/\*/g,"")}">`);input.trigger("click");input.on("change",()=>{let file=input.prop("files")[0];handleUploadedFile(file,target)})});function handleUploadedFile(file,target){let reader=new FileReader;reader.readAsDataURL(file);reader.onload=()=>{target.removeClass("dragover");let content=atob(reader.result.split(";base64,").pop());target.trigger("upload",[{name:file.name,content:content,file:file}])}}$(".drag-drop-area").each((_,element)=>{let target=$(element);let acceptAttr=target.attr("accept");target.html(`<i>(${acceptAttr})</i>`)});$(".popup:not(.no-close)").on("click",e=>{if(e.target==$(".popup.active")[0]){closePopup()}});$(".popup .close").on("click",()=>closePopup());$("toggle").on("click",e=>{e.preventDefault();let target=$(e.target);let value=target.attr("value")==="true";target.attr("value",!value);target.trigger("toggle",[{value:!value}])});function closePopup(){let activePopup=$(".popup.active");activePopup.removeClass("active");$("body").css("overflow","");$(activePopup).trigger("close")}function openPopup(id){$(`#${id}`).addClass("active");$("body").css("overflow","hidden")}function startLoading(){$("body").append("<div id='js-loader'><div class='loading'></div></div>")}function stopLoading(){$("#js-loader").remove()}function isLoading(){return $("#js-loader .loading").length>0}